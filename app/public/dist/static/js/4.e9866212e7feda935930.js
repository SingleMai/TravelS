webpackJsonp([4],{"/OVz":function(e,t){},"3pAk":function(e,t){},"7Jrm":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("lC5x"),r=n.n(a),s=n("HzJ8"),i=n.n(s),o=n("J0Oq"),l=n.n(o),c=n("gyMJ"),u=n("wSez"),f={name:"",data:function(){return{data:[],imgs:[],currentFile:[]}},methods:{filesChange:function(e){var t=this;t.imgs=[];var n=e.target.files;this.currentFile=n;var a=function(e){var n=new FileReader;n.onloadend=function(){n.readyState===n.DONE&&(t.imgs.push(n.result),t.$emit("filesChange",t.currentFile))},n.readAsDataURL(e)},r=!0,s=!1,o=void 0;try{for(var l,c=i()(n);!(r=(l=c.next()).done);r=!0){a(l.value)}}catch(e){s=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(s)throw o}}}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"file-list"},[e._l(e.imgs,function(e,t){return n("li",{key:t,staticClass:"file-item"},[n("img",{staticClass:"img",attrs:{src:e}})])}),e._v(" "),n("li",{staticClass:"file-item plus"},[n("p",[e._v("+")]),e._v(" "),n("input",{attrs:{type:"file",multiple:"multiple"},on:{change:e.filesChange}})])],2)},staticRenderFns:[]};var d={name:"",data:function(){return{content:"",files:[]}},methods:{filesChange:function(e){this.files=e},createTravels:function(){var e=this;return l()(r.a.mark(function t(){var n,a,s,o,l,f,v;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for((n=new FormData).append("content",e.content),a=!0,s=!1,o=void 0,t.prev=5,l=i()(e.files);!(a=(f=l.next()).done);a=!0)v=f.value,n.append("travelImg",v);t.next=13;break;case 9:t.prev=9,t.t0=t.catch(5),s=!0,o=t.t0;case 13:t.prev=13,t.prev=14,!a&&l.return&&l.return();case 16:if(t.prev=16,!s){t.next=19;break}throw o;case 19:return t.finish(16);case 20:return t.finish(13);case 21:return t.prev=21,t.next=24,c.e.createTravels(n);case 24:e.$router.go(-1),t.next=30;break;case 27:t.prev=27,t.t1=t.catch(21),Object(u.Toast)({message:"创建失败: "+t.t1.message,position:"middle",duration:3e3});case 30:case"end":return t.stop()}},t,e,[[5,9,13,21],[14,,16,20],[21,27]])}))()}},components:{MUploadFile:n("X4nt")(f,v,!1,function(e){n("3pAk")},"data-v-fb1dada2",null).exports}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("mt-header",{staticClass:"m-header"},[n("router-link",{attrs:{slot:"left",to:"/travels"},slot:"left"},[n("span",{staticClass:"m-header-span"},[e._v("取消")])]),e._v(" "),n("span",{staticClass:"m-header-span",attrs:{slot:"right"},on:{click:e.createTravels},slot:"right"},[e._v("发布")])],1),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],staticClass:"testInput",attrs:{rows:5,placeholder:"请输入旅途见闻..."},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}}),e._v(" "),n("m-upload-file",{on:{filesChange:e.filesChange}})],1)},staticRenderFns:[]};var m=n("X4nt")(d,p,!1,function(e){n("/OVz")},"data-v-c4ce1bb2",null);t.default=m.exports},HzJ8:function(e,t,n){e.exports={default:n("aSM5"),__esModule:!0}},aSM5:function(e,t,n){n("dmd9"),n("wCtA"),e.exports=n("rLQK")},rLQK:function(e,t,n){var a=n("Dc6E"),r=n("X6b2");e.exports=n("UusJ").getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}}});
//# sourceMappingURL=4.e9866212e7feda935930.js.map