webpackJsonp([22],{qqgq:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("lC5x"),n=s.n(a),r=s("J0Oq"),i=s.n(r),c=s("gyMJ"),o={name:"",mounted:function(){var t=this;this.$_getOneMsg(),this.timer=setInterval(function(){t.$_getOneMsg()},2e3)},data:function(){return{name:this.$route.query.name,head:this.$route.query.head,myInfo:JSON.parse(window.localStorage.getItem("user")),id:this.$route.params.id,message:"",timer:null,data:[]}},methods:{back:function(){this.$router.go(-1)},sendMsg:function(){var t=this;return i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.b.createMsg({friendId:parseInt(t.id),message:t.message});case 2:t.message="";case 3:case"end":return e.stop()}},e,t)}))()},$_getOneMsg:function(){var t=this;return i()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.b.getOneChatByOne({friendId:t.id});case 2:s=e.sent,t.data=s;case 4:case"end":return e.stop()}},e,t)}))()}},beforeDestroy:function(){clearInterval(this.timer)}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("mt-header",{staticClass:"m-header",attrs:{title:t.name}},[s("mt-button",{attrs:{slot:"left",icon:"back"},nativeOn:{click:function(e){t.back(e)}},slot:"left"},[t._v("返回")])],1),t._v(" "),s("ul",{staticClass:"content"},t._l(t.data,function(e,a){return s("li",{key:a,staticClass:"content-item",class:{right:e.to_user_id===parseInt(t.id)}},[s("div",{staticClass:"avator"},[e.to_user_id===parseInt(t.id)?s("img",{attrs:{src:t.myInfo.head,alt:""}}):s("img",{attrs:{src:t.head,alt:""}})]),t._v(" "),s("p",{staticClass:"message"},[t._v(t._s(e.message))])])})),t._v(" "),s("div",{staticClass:"chat-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),s("mt-button",{staticClass:"btn-send",attrs:{type:"primary",size:"small"},on:{click:t.sendMsg}},[t._v("发送")])],1)],1)},staticRenderFns:[]};var d=s("X4nt")(o,u,!1,function(t){s("rb2i")},"data-v-40a4650f",null);e.default=d.exports},rb2i:function(t,e){}});
//# sourceMappingURL=22.615efae37fcfc2393e7e.js.map