{"version":3,"sources":["webpack:///src/components/Carousel.vue","webpack:///./src/components/Carousel.vue?0249","webpack:///./src/components/Carousel.vue"],"names":["Carousel","$_getData","this","raw","FileReader","result","_this2","id","success","message","_this3","validate","FormData","weight","link","carousel","formData","resetDate","_this4","_this5","getCarousel","data","components_Carousel","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","type","icon","on","click","$event","dialogVisible","_v","staticStyle","width","cell-style","textAlignCenter","header-cell-style","prop","label","scopedSlots","_u","key","fn","scope","height","src","row","alt","size","handleDelete","$index","title","visible","update:visible","before-close","closeDialog","close","ref","label-position","label-width","model","currentItem","rules","action","show-file-list","auto-upload","on-change","change","carouselImg","value","callback","$$v","$set","expression","slot","confirmDialog","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.f5a79c380ecf4c67971a.js","sourcesContent":["<template>\n  <div>\n    <div class=\"btn-box\">\n      <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"dialogVisible = true\">添加轮播图</el-button>\n    </div>\n    <el-table\n      :data=\"data\"\n      style=\"width: 100%\"\n      :cell-style=\"textAlignCenter\"\n      :header-cell-style=\"textAlignCenter\">\n      <el-table-column\n        prop=\"carousel\"\n        label=\"图片\">\n        <template slot-scope=\"scope\">\n          <img style=\"height: 150px;width:250px;\" :src=\"scope.row.carousel\" alt=\"\">\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"weight\"\n        label=\"顺序\">\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <!-- <el-button\n            size=\"mini\"\n            @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button> -->\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog title=\"添加/修改轮播图\"\n               :visible.sync=\"dialogVisible\"\n               @before-close='closeDialog'\n               @close=\"resetDate\">\n      <el-form label-position=\"top\"\n               label-width=\"80px\"\n               :model=\"currentItem\"\n               :rules=\"rules\"\n               ref=\"ruleDialog\">\n        <el-form-item label=\"图片\" prop=\"carousel\">\n          <el-upload\n            class=\"avatar-uploader\"\n            action=\"/backen/carousel\"\n            :show-file-list=\"false\"\n            :auto-upload=\"false\"\n            :on-change=\"change\">\n            <img v-if=\"carouselImg\" :src=\"carouselImg\" class=\"avatar\">\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </el-form-item>\n        <el-form-item label=\"优先级\" prop=\"weight\">\n          <el-input v-model=\"currentItem.weight\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"链接\" prop=\"link\">\n          <el-input v-model=\"currentItem.link\"></el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"closeDialog\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"confirmDialog('ruleDialog')\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { CarouselApi } from 'api'\n\nexport default {\n  name: '',\n  mounted () {\n    this.$_getData()\n  },\n  data () {\n    return {\n      textAlignCenter: {\n        textAlign: 'center'\n      },\n      data: [],\n      dialogVisible: false,\n      currentItem: {},\n      carouselImg: null,\n      currentIndex: null,\n      rules: {}\n    }\n  },\n  methods: {\n    change (file) {\n      const _this = this\n      this.currentItem.carousel = file.raw\n      const fileReader = new FileReader()\n      fileReader.onloadend = function () {\n        if (fileReader.readyState === fileReader.DONE) {\n          _this.carouselImg = fileReader.result\n        }\n      }\n      fileReader.readAsDataURL(file.raw)\n    },\n    resetDate () {\n      this.currentItem = {}\n      this.currentIndex = null\n      this.dialogVisible = false\n      this.carouselImg = null\n    },\n    async handleDelete (index, row) {\n      await this.$confirm('删除的内容将无法再恢复，请确认删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n      try {\n        await CarouselApi.delCarousel({ id: row.id })\n        this.data.splice(index, 1)\n        this.$message.success(`删除轮播图信息成功！`)\n      } catch (err) {\n        this.$message.error(`删除轮播图信息失败:  ${err.message}`)\n      }\n    },\n    async confirmDialog (formName) {\n      await this.$refs[formName].validate()\n      try {\n        const formData = new FormData()\n        formData.append('weight', this.currentItem.weight)\n        formData.append('link', this.currentItem.link)\n        formData.append('carousel', this.currentItem.carousel)\n\n        const result = await CarouselApi.createCarousel(formData)\n        await this.$_getData()\n        this.resetDate()\n        this.$message.success(`添加轮播图信息成功！`)\n      } catch (err) {\n        this.$message.error(`添加轮播图信息失败:  ${err.message}`)\n      }\n    },\n    async closeDialog (done) {\n      this.resetDate()\n    },\n    async $_getData () {\n      const data = await CarouselApi.getCarousel()\n      this.data = data\n    }\n  }\n}\n</script>\n<!-- Add 'scoped' attribute to limit CSS to this component only -->\n<style lang='scss' scoped='' type='text/css'>\n  .btn-box {\n    display: flex;\n    justify-content: flex-end;\n    margin-bottom: 10px;\n  }\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Carousel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"btn-box\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(\"添加轮播图\")])],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.data,\"cell-style\":_vm.textAlignCenter,\"header-cell-style\":_vm.textAlignCenter}},[_c('el-table-column',{attrs:{\"prop\":\"carousel\",\"label\":\"图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{staticStyle:{\"height\":\"150px\",\"width\":\"250px\"},attrs:{\"src\":scope.row.carousel,\"alt\":\"\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"weight\",\"label\":\"顺序\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){_vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"添加/修改轮播图\",\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"before-close\":_vm.closeDialog,\"close\":_vm.resetDate}},[_c('el-form',{ref:\"ruleDialog\",attrs:{\"label-position\":\"top\",\"label-width\":\"80px\",\"model\":_vm.currentItem,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"图片\",\"prop\":\"carousel\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"/backen/carousel\",\"show-file-list\":false,\"auto-upload\":false,\"on-change\":_vm.change}},[(_vm.carouselImg)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.carouselImg}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"优先级\",\"prop\":\"weight\"}},[_c('el-input',{model:{value:(_vm.currentItem.weight),callback:function ($$v) {_vm.$set(_vm.currentItem, \"weight\", $$v)},expression:\"currentItem.weight\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"链接\",\"prop\":\"link\"}},[_c('el-input',{model:{value:(_vm.currentItem.link),callback:function ($$v) {_vm.$set(_vm.currentItem, \"link\", $$v)},expression:\"currentItem.link\"}})],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.closeDialog}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.confirmDialog('ruleDialog')}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-b18d5a36\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/components/Carousel.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b18d5a36\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./Carousel.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./Carousel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./Carousel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b18d5a36\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./Carousel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b18d5a36\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Carousel.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}