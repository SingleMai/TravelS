webpackJsonp([5],{mfOW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("lC5x"),n=a.n(r),l=a("J0Oq"),s=a.n(l),i=a("gyMJ"),c={name:"",mounted:function(){this.$_getData()},data:function(){return{textAlignCenter:{textAlign:"center"},data:[],dialogVisible:!1,currentItem:{},carouselImg:null,currentIndex:null,rules:{}}},methods:{change:function(e){var t=this;this.currentItem.carousel=e.raw;var a=new FileReader;a.onloadend=function(){a.readyState===a.DONE&&(t.carouselImg=a.result)},a.readAsDataURL(e.raw)},resetDate:function(){this.currentItem={},this.currentIndex=null,this.dialogVisible=!1,this.carouselImg=null},handleDelete:function(e,t){var a=this;return s()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.$confirm("删除的内容将无法再恢复，请确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:return r.prev=2,r.next=5,i.a.delCarousel({id:t.id});case 5:a.data.splice(e,1),a.$message.success("删除轮播图信息成功！"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),a.$message.error("删除轮播图信息失败:  "+r.t0.message);case 12:case"end":return r.stop()}},r,a,[[2,9]])}))()},confirmDialog:function(e){var t=this;return s()(n.a.mark(function a(){var r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$refs[e].validate();case 2:return a.prev=2,(r=new FormData).append("weight",t.currentItem.weight),r.append("link",t.currentItem.link),r.append("carousel",t.currentItem.carousel),a.next=9,i.a.createCarousel(r);case 9:return a.sent,a.next=12,t.$_getData();case 12:t.resetDate(),t.$message.success("添加轮播图信息成功！"),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(2),t.$message.error("添加轮播图信息失败:  "+a.t0.message);case 19:case"end":return a.stop()}},a,t,[[2,16]])}))()},closeDialog:function(e){var t=this;return s()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.resetDate();case 1:case"end":return e.stop()}},e,t)}))()},$_getData:function(){var e=this;return s()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.getCarousel();case 2:a=t.sent,e.data=a;case 4:case"end":return t.stop()}},t,e)}))()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加轮播图")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data,"cell-style":e.textAlignCenter,"header-cell-style":e.textAlignCenter}},[a("el-table-column",{attrs:{prop:"carousel",label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"150px",width:"250px"},attrs:{src:e.row.carousel,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"weight",label:"顺序"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加/修改轮播图",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},"before-close":e.closeDialog,close:e.resetDate}},[a("el-form",{ref:"ruleDialog",attrs:{"label-position":"top","label-width":"80px",model:e.currentItem,rules:e.rules}},[a("el-form-item",{attrs:{label:"图片",prop:"carousel"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/backen/carousel","show-file-list":!1,"auto-upload":!1,"on-change":e.change}},[e.carouselImg?a("img",{staticClass:"avatar",attrs:{src:e.carouselImg}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"优先级",prop:"weight"}},[a("el-input",{model:{value:e.currentItem.weight,callback:function(t){e.$set(e.currentItem,"weight",t)},expression:"currentItem.weight"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"链接",prop:"link"}},[a("el-input",{model:{value:e.currentItem.link,callback:function(t){e.$set(e.currentItem,"link",t)},expression:"currentItem.link"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.confirmDialog("ruleDialog")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=a("Z0/y")(c,o,!1,function(e){a("xhrB")},"data-v-b18d5a36",null);t.default=u.exports},xhrB:function(e,t){}});
//# sourceMappingURL=5.f5a79c380ecf4c67971a.js.map